!function(t){var o=0;t.isSmartSidebar=function(o){return!!t(o).data("SmartSidebar")},t.SmartSidebar=function(i,s){function a(){if(!r())return p.off("scroll",a);a.lastScrollTop=a.lastScrollTop||0;var t=c.height(),o=p.scrollTop(),i=o-a.lastScrollTop,e=f.scrollTop()+i;a.lastScrollTop=o,g>e&&(e=g>o?o:g);var n=!s.saveBottomOffset&&v.height()-p.height()-o>t;n?(c.hide(),h.css({height:f.height()-l.height()+"px"})):(c.show(),h.css({height:f.height()-l.height()-t+"px"})),f.scrollTop(e)}function e(t){t=t||0,t>=0&&r()&&(a(),setTimeout(function(){e(t-1)},100))}function r(){return t("#"+d).length}s=s||{},s.railClass=s.railClass||"sidebar-rail",s.saveBottomOffset=!!s.saveBottomOffset;var l=t(i);l.data("SmartSidebar",!0);var n=l.offset(),d="ssr"+ ++o,f=t('<div id="'+d+'" class="'+s.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;"><div class="top-offset"></div></div>'),c=t('<div class="bottom-offset" style="margin:0;padding:0;"></div>'),h=t('<div class="bottom-gap" style="margin:0;padding:0;"></div>');f.css({left:n.left+"px"}),l.before(f),f.append(l),f.append(c),f.append(h);var p=t(window),v=t(window.document.body),g=Math.max(n.top-f.offset().top-p.scrollTop(),0);f.find(".top-offset").css({height:g+"px"}),p.on("scroll",a),e(200)},t.fn.smartSidebar=function(o){return this.each(function(){return t.SmartSidebar(this,o)})}}(jQuery);