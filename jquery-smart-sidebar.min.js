!function(t){var n=0;t.isSmartSidebar=function(n){return!!t(n).data("SmartSidebar")},t.SmartSidebar=function(e,i){function o(){w=x.height(),C=Math.max(m.top-w,0),T.css({height:C+"px"})}function a(){O=B.height(),y=S.height(),b=h.outerHeight(!0),j=Math.max(y-b-O,0),M.height(j)}function r(t){setTimeout(function(){s(),l(t)},10)}function s(){m=h.offset(),S=t('<div id="'+z+'" class="'+i.railClass+'" style="overflow:hidden;position:fixed;padding:1px;top:0;bottom:0;pointer-events:none;"></div>'),T=t('<div class="top-gap" style="margin:0;padding:0;pointer-events:none;"></div>'),x=t('<div class="top-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),B=t('<div class="bottom-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),M=t('<div class="bottom-gap" style="margin:0;padding:0;pointer-events:none;"></div>'),S.css({left:m.left+"px"}),h.before(S),o(),a(),S.append(T),S.append(x),S.append(h),S.append(B),S.append(M)}function d(){S.replaceWith(h)}function f(){if(S){if(!p())return u.off("scroll",f);g=g||0;var t=u.scrollTop(),n=t-g,e=S.scrollTop()+n;g=t,o(),a();var i=w+C,r=i&&v.height()-u.height()-t;if(t>i&&C>e&&(e=C),t>i&&e>i&&r>O&&y>b&&(e=i),e>i&&r>O){var s=C+w+b-y;e>s&&(e=s)}S.scrollTop(e)}}function l(t){t=t||0,t>=0&&p()&&(f(),setTimeout(function(){l(t-1)},100))}function p(){return t("#"+z).length}function c(t,n){function e(r){r===a?(t.apply(o,i),a=0):setTimeout(function(){e(a)},n)}var i,o,a=0;return function(){a++,i=Array.prototype.slice.call(arguments),o=this,1===a&&e(0)}}i=i||{},i.railClass=(i.railClass?i.railClass+" ":"")+"sidebar-rail",i.saveBottomOffset=!!i.saveBottomOffset;var u=t(window),v=t(window.document.body),h=t(e);h.data("SmartSidebar",!0).css({"pointer-events":"all"});var m,g,b,S,y,x,T,w,C,B,M,O,j,z="ssr"+ ++n;r(50),u.on("scroll",f),u.on("resize",c(function(){d(),r(1)},500))},t.fn.smartSidebar=function(n){return this.each(function(){return t.SmartSidebar(this,n)})}}(jQuery);