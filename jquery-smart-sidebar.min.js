!function(t){var e=0;t.isSmartSidebar=function(e){return!!t(e).data("SmartSidebar")},t.SmartSidebar=function(n,o){function i(){T=Math.max(v.top-parseInt(m.css("top"))-parseInt(m.css("margin-top")),0),g.css({height:T+"px"})}function s(t){setTimeout(function(){r(),c(t)},10)}function r(){v=h.offset(),m=t('<div id="'+y+'" class="'+o.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;pointer-events:none;"></div>'),g=t('<div class="top-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),S=t('<div class="bottom-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),b=t('<div class="bottom-gap" style="margin:0;padding:0;pointer-events:none;"></div>'),m.css({left:v.left+"px"}),h.before(m),i(),m.append(g),m.append(h),m.append(S),m.append(b)}function a(){m.replaceWith(h)}function l(){if(m){if(!p())return d.off("scroll",l);i(),l.lastScrollTop=l.lastScrollTop||0;var t=S.height(),e=d.scrollTop(),n=e-l.lastScrollTop,s=m.scrollTop()+n;l.lastScrollTop=e,T>s&&(s=T>e?e:T);var r=!o.saveBottomOffset&&u.height()-d.height()-e>t;r?(S.hide(),b.css({height:m.height()-h.outerHeight(!0)+"px"})):(S.show(),b.css({height:m.height()-h.outerHeight(!0)-t+"px"})),m.scrollTop(s)}}function c(t){t=t||0,t>=0&&p()&&(l(),setTimeout(function(){c(t-1)},100))}function p(){return t("#"+y).length}function f(t,e){function n(r){r===s?(t.apply(i,o),s=0):setTimeout(function(){n(s)},e)}var o,i,s=0;return function(){s++,o=Array.prototype.slice.call(arguments),i=this,1===s&&n(0)}}o=o||{},o.railClass=(o.railClass?o.railClass+" ":"")+"sidebar-rail",o.saveBottomOffset=!!o.saveBottomOffset;var d=t(window),u=t(window.document.body),h=t(n);h.data("SmartSidebar",!0).css({"pointer-events":"all"});var v,m,g,S,b,T,y="ssr"+ ++e;s(50),d.on("scroll",l),d.on("resize",f(function(){a(),s(1)},500))},t.fn.smartSidebar=function(e){return this.each(function(){return t.SmartSidebar(this,e)})}}(jQuery);