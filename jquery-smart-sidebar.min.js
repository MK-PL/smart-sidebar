!function(t){var n=0;t.isSmartSidebar=function(n){return!!t(n).data("SmartSidebar")},t.SmartSidebar=function(i,e){function o(){S=m.height(),y=Math.max(c.top-S,0),b.height(y),x=T.height(),g=h.height(),w.height(g),v=f.outerHeight(!0),C=Math.max(g-v-x,0)}function a(){c=f.offset(),h=t('<div id="'+z+'" class="'+e.railClass+'" style="overflow:hidden;position:fixed;padding:1px;top:0;bottom:0;pointer-events:none;"></div>'),b=t('<div class="top-gap" style="margin:0;padding:0;pointer-events:none;"></div>'),m=t('<div class="top-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),T=t('<div class="bottom-offset" style="margin:0;padding:0;pointer-events:none;"></div>'),w=t('<div class="bottom-gap" style="margin:0;padding:0;pointer-events:none;"></div>'),h.css({left:c.left+"px"}),f.before(h),o(),h.append(b),h.append(m),h.append(f),h.append(T),h.append(w)}function r(){h.replaceWith(f)}function s(){return t("#"+z).length?!0:(l.off("scroll",j),l.off("resize",M),!1)}function d(t,n){function i(r){r===a?(t.apply(o,e),a=0):setTimeout(function(){i(a)},n)}var e,o,a=0;return function(){a++,e=Array.prototype.slice.call(arguments),o=this,1===a&&i(0)}}e=e||{},e.railClass=(e.railClass?e.railClass+" ":"")+"sidebar-rail";var l=t(window),p=t(window.document.body),f=t(i);f.data("SmartSidebar",!0).css({"pointer-events":"all"});var c,u,v,h,g,m,b,S,y,T,w,x,C,z="ssr"+ ++n,M=d(function(){h&&s()&&(r(),setTimeout(function(){a(),j()},10))},500),j=function(){if(h&&s()){u=u||0;var t=l.scrollTop(),n=t-u,i=h.scrollTop()+n;u=t,o();var e=S+y;if(e>t)return void h.scrollTop(t);var a=e&&p.height()-l.height()-t;if(t>y&&y>i&&(i=y),t>e&&i>e&&a>x&&g>v&&(i=e),i>e&&a>x){var r=y+S+v-g;i>r&&(i=r)}if(x>a){var r=y+S+v+x+C-g;i>r&&(i=r)}h.scrollTop(i)}};setTimeout(function(){a(),j(),l.on("scroll",j),l.on("resize",M)},10)},t.fn.smartSidebar=function(n){return this.each(function(){return t.SmartSidebar(this,n)})}}(jQuery);