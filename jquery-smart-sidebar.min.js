!function(t){var a=0;t.isSmartSidebar=function(a){return!!t(a).data("SmartSidebar")},t.SmartSidebar=function(i,o){function s(){if(!r())return u.off("scroll",s);s.lastScrollTop=s.lastScrollTop||0;var t=c.height(),a=u.scrollTop(),i=a-s.lastScrollTop,e=f.scrollTop()+i;s.lastScrollTop=a,g>e&&(e=g>a?a:g);var l=!o.saveBottomOffset&&v.height()-u.height()-a>t;l?(c.hide(),h.css({height:f.height()-n.outerHeight(!0)+"px"})):(c.show(),h.css({height:f.height()-n.outerHeight(!0)-t+"px"})),f.scrollTop(e)}function e(t){t=t||0,t>=0&&r()&&(s(),setTimeout(function(){e(t-1)},100))}function r(){return t("#"+d).length}o=o||{},o.railClass=o.railClass||"sidebar-rail",o.saveBottomOffset=!!o.saveBottomOffset;var n=t(i);n.data("SmartSidebar",!0);var l=n.offset(),d="ssr"+ ++a,f=t('<div id="'+d+'" class="'+o.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;"></div>'),p=t('<div class="top-offset" style="margin:0;padding:0;"></div>'),c=t('<div class="bottom-offset" style="margin:0;padding:0;"></div>'),h=t('<div class="bottom-gap" style="margin:0;padding:0;"></div>');f.css({left:l.left+"px"}),n.before(f);var g=Math.max(l.top-parseInt(f.css("top")),0);p.css({height:g+"px"}),f.append(p),f.append(n),f.append(c),f.append(h);var u=t(window),v=t(window.document.body);e(200),u.on("scroll",s)},t.fn.smartSidebar=function(a){return this.each(function(){return t.SmartSidebar(this,a)})}}(jQuery);