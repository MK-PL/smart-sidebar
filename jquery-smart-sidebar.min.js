!function(t){var o=0;t.isSmartSidebar=function(o){return!!t(o).data("SmartSidebar")},t.SmartSidebar=function(i,s){function e(){if(!r())return h.off("scroll",e);e.lastScrollTop=e.lastScrollTop||0;var t=c.height(),o=h.scrollTop(),i=o-e.lastScrollTop,a=f.scrollTop()+i;e.lastScrollTop=o,v>a&&(a=v>o?o:v);var n=!s.saveBottomOffset&&u.height()-h.height()-o>t;n?(c.hide(),p.css({height:f.height()-l.outerHeight(!0)+"px"})):(c.show(),p.css({height:f.height()-l.outerHeight(!0)-t+"px"})),f.scrollTop(a)}function a(t){t=t||0,t>=0&&r()&&(e(),setTimeout(function(){a(t-1)},100))}function r(){return t("#"+d).length}s=s||{},s.railClass=s.railClass||"sidebar-rail",s.saveBottomOffset=!!s.saveBottomOffset;var l=t(i);l.data("SmartSidebar",!0);var n=l.offset(),d="ssr"+ ++o,f=t('<div id="'+d+'" class="'+s.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;"><div class="top-offset"></div></div>'),c=t('<div class="bottom-offset" style="margin:0;padding:0;"></div>'),p=t('<div class="bottom-gap" style="margin:0;padding:0;"></div>');f.css({left:n.left+"px"}),l.before(f),f.append(l),f.append(c),f.append(p);var h=t(window),u=t(window.document.body),v=Math.max(n.top-f.offset().top-h.scrollTop(),0);f.find(".top-offset").css({height:v+"px"}),h.on("scroll",e),a(200)},t.fn.smartSidebar=function(o){return this.each(function(){return t.SmartSidebar(this,o)})}}(jQuery);