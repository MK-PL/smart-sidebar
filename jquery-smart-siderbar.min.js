!function(t){var o=0;t.isSmartSidebar=function(o){return!!t(o).data("SmartSidebar")},t.SmartSidebar=function(s,r){function i(){if(!e())return p.off("scroll",i);i.lastScrollTop=i.lastScrollTop||0;var t=c.height(),o=h.height(),s=p.height(),a=d[0].scrollHeight,l=d.height(),f=p.scrollTop(),n=f-i.lastScrollTop,v=d.scrollTop(),S=v+n;i.lastScrollTop=f,u>S&&(S=u>f?f:u),!r.saveBottomOffset&&t>a-l-S&&o-s-f>t&&(S=a-l-t),d.scrollTop(S)}function a(t){t=t||0,t>=0&&e()&&(i(),setTimeout(function(){a(t-1)},100))}function e(){return t("#"+n).length}r=r||{},r.railClass=r.railClass||"sidebar-rail",r.saveBottomOffset=!!r.saveBottomOffset;var l=t(s);l.data("SmartSidebar",!0);var f=l.offset(),n="ssr"+ ++o,d=t('<div id="'+n+'" class="'+r.railClass+'" style="overflow:hidden;position:fixed;padding:1px;bottom:0;"><div class="top-offset"></div></div>'),c=t('<div class="bottom-offset"></div>');d.css({left:f.left+"px"}),l.before(d),d.append(l),d.append(c);var p=t(window),h=t(window.document.body),u=Math.max(f.top-d.offset().top-p.scrollTop(),0);d.find(".top-offset").css({height:u+"px"}),p.on("scroll",i),a(200)},t.fn.smartSidebar=function(o){return this.each(function(){return t.SmartSidebar(this,o)})}}(jQuery);